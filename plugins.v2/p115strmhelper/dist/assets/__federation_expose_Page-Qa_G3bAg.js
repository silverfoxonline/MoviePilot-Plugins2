import{importShared as e}from"./__federation_fn_import-B6DyUTOO.js";import{_ as l}from"./_plugin-vue_export-helper-BCo6x5W8.js";const{resolveComponent:a,createVNode:t,createElementVNode:i,withCtx:s,toDisplayString:n,createTextVNode:r,openBlock:o,createBlock:c,createCommentVNode:d,createElementBlock:u,renderList:m,Fragment:p,normalizeClass:f,mergeProps:g,withModifiers:_,withKeys:y}=await e("vue"),h={class:"plugin-page"},v={key:3,class:"my-1"},x={key:1},b={key:1,class:"text-center py-4"},k={class:"d-flex flex-wrap align-center gap-1 mt-1"},w={key:0,class:"text-grey"},C={key:1,class:"text-grey"},z={key:2,class:"text-grey"},P={class:"text-grey mt-1"},V={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},M=["title"],S={class:"text-caption",style:{"line-height":"1.2"}},T=["title"],$={class:"text-caption",style:{"line-height":"1.2"}},U={key:1,class:"text-caption text-error mt-1"},E={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},I=["title"],R={class:"text-caption",style:{"line-height":"1.2"}},L=["title"],F={class:"text-caption",style:{"line-height":"1.2"}},B={key:1,class:"text-caption text-error mt-1"},j={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},A=["title"],O={class:"text-caption",style:{"line-height":"1.2"}},H=["title"],D={class:"text-caption",style:{"line-height":"1.2"}},N={key:1,class:"text-caption text-error mt-1"},W={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},q=["title"],K={class:"text-caption",style:{"line-height":"1.2"}},G=["title"],J={class:"text-caption",style:{"line-height":"1.2"}},Z={key:1,class:"text-caption text-error mt-1"},Q={class:"path-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},X={class:"d-flex align-center"},Y=["title"],ee={class:"text-caption",style:{"line-height":"1.2"}},le={key:1,class:"text-caption text-error mt-1"},ae={class:"path-group-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},te=["title"],ie={class:"text-caption",style:{"line-height":"1.2"}},se=["title"],ne={class:"text-caption",style:{"line-height":"1.2"}},re={key:0,class:"mt-1 pt-1",style:{"border-top":"1px dashed rgba(var(--v-border-color), 0.2)"}},oe={key:0,class:"d-flex align-center"},ce=["title"],de={class:"text-caption",style:{"line-height":"1.2"}},ue={key:1,class:"text-caption text-error mt-1"},me={class:"d-flex"},pe={class:"text-body-2"},fe={class:"d-flex"},ge={class:"text-body-2"},_e={class:"d-flex align-center",style:{gap:"4px"}},ye={class:"d-flex flex-column"},he={key:0,class:"mb-1"},ve={key:1,class:"text-grey"},xe={class:"d-flex flex-wrap ga-2 mt-1"},be={key:0},ke={key:1},we={class:"d-flex align-center"},Ce={class:"d-flex align-center"},ze={key:0},Pe={class:"d-flex align-center"},Ve={class:"d-flex align-center"},Me={class:"d-flex align-center"},Se={class:"d-flex align-center"},Te={class:"text-no-wrap text-caption font-weight-medium",style:{"min-width":"40px","text-align":"right"}},$e={class:"pa-3"},Ue={class:"d-flex justify-end mt-3"},Ee={key:0,class:"d-flex justify-center my-3"},Ie={key:1},Re={key:1,class:"text-center py-8"},Le={class:"d-flex flex-wrap align-center gap-1 mt-1"},Fe={key:0,class:"text-grey"},Be={key:1,class:"text-grey"},je={key:2,class:"text-grey"},Ae={key:0,class:"text-grey mt-1",style:{"word-break":"break-all"}},Oe={class:"text-grey mt-1"},{ref:He,reactive:De,computed:Ne,onMounted:We,onBeforeUnmount:qe,watch:Ke}=await e("vue"),Ge=l({__name:"Page",props:{api:{type:[Object,Function],required:!0},initialConfig:{type:Object,default:()=>({})}},emits:["close","switch","update:config","action"],setup(e,{emit:l}){const Ge=e,Je=l,Ze=e=>{if(!e||"string"!=typeof e)return 0;const l=e.trim().match(/^(\d*\.?\d+)\s*(k|m|g|t)?b?$/i);if(!l)return 0;const a=parseFloat(l[1]);switch((l[2]||"").toLowerCase()){case"t":return Math.round(1024*a*1024*1024*1024);case"g":return Math.round(1024*a*1024*1024);case"m":return Math.round(1024*a*1024);case"k":return Math.round(1024*a);default:return Math.round(a)}},Qe=(e,l=2)=>{if(!+e)return"";const a=l<0?0:l,t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(a))} ${["B","K","M","G","T"][t]}`},Xe=He(!0),Ye=He(!1),el=He(!1),ll=He(!1),al=He(!1),tl=He(!1),il=He(null),sl=He(null),nl=He("info"),rl=He(!1),ol=He(!1),cl=He(!1),dl=He([]),ul=He(!1),ml=He(null);let pl=null;const fl=Ne(()=>dl.value.slice(0,6)),gl=De({show:!1}),_l=De({enabled:!1,has_client:!1,running:!1}),yl=De({name:null,is_vip:null,is_forever_vip:null,vip_expire_date:null,avatar:null,error:null,loading:!0}),hl=De({total:null,used:null,remaining:null,error:null,loading:!0}),vl=De({show:!1,activeTab:"tasks",loading:!1,adding:!1,error:null,addError:null,tasks:[],totalTasks:0,itemsPerPage:10,headers:[{title:"文件名",key:"name",align:"start",sortable:!1,minWidth:"200px"},{title:"大小",key:"size_text",align:"end",sortable:!1,cellProps:{class:"text-no-wrap"},minWidth:"80px"},{title:"状态",key:"status_text",align:"center",sortable:!1,minWidth:"80px"},{title:"进度",key:"progress",align:"start",sortable:!1,minWidth:"120px"}],links:"",destPath:""}),xl=(e,l)=>{if(!e||!l)return 0;const a=e=>{if(!e||"string"!=typeof e)return 0;const l=parseFloat(e);return isNaN(l)?0:e.toUpperCase().includes("TB")?1024*l*1024:e.toUpperCase().includes("GB")?1024*l:(e.toUpperCase().includes("MB"),l)},t=a(e),i=a(l);return 0===i?0:Math.min(Math.max(t/i*100,0),100)},bl=Ne(()=>{if(!Ge.initialConfig)return!1;if(!(Ge.initialConfig.enabled&&Ge.initialConfig.cookies&&Ge.initialConfig.moviepilot_address))return!1;const e=kl(Ge.initialConfig.transfer_monitor_paths)>0&&Ge.initialConfig.transfer_monitor_enabled,l=kl(Ge.initialConfig.full_sync_strm_paths)>0&&Ge.initialConfig.timing_full_sync_strm,a=kl(Ge.initialConfig.increment_sync_strm_paths)>0&&Ge.initialConfig.increment_sync_strm_enabled,t=kl(Ge.initialConfig.monitor_life_paths)>0&&Ge.initialConfig.monitor_life_enabled,i=Array.isArray(Ge.initialConfig.share_strm_config)&&Ge.initialConfig.share_strm_config.length>0;return e||l||a||t||i}),kl=e=>{if(!e)return 0;try{return e.split("\n").filter(e=>e.trim()&&e.includes("#")).length}catch(l){return console.error("解析路径字符串失败:",l),0}},wl=e=>{if(!e)return 0;try{return e.split("\n").filter(e=>e.trim()).length}catch(l){return console.error("解析网盘整理路径字符串失败:",l),0}},Cl=async()=>{Xe.value=!0,il.value=null;try{const l="P115StrmHelper",a=await Ge.api.get(`plugin/${l}/get_status`);if(!a||0!==a.code||!a.data){if(Ge.initialConfig){if(_l.enabled=Boolean(Ge.initialConfig.enabled),_l.has_client=Boolean(Ge.initialConfig.cookies&&""!==Ge.initialConfig.cookies.trim()),_l.running=!1,tl.value=!0,Object.keys(Ge.initialConfig).length<=1)try{const e=await Ge.api.get(`plugin/${l}/get_config`);e&&(Object.assign(Ge.initialConfig,e),console.log("从配置API获取配置:",Ge.initialConfig))}catch(e){console.error("获取配置失败:",e)}throw new Error("状态API调用失败，使用配置数据显示状态")}throw new Error(a?.msg||"获取状态失败，请检查网络连接")}_l.enabled=Boolean(a.data.enabled),_l.has_client=Boolean(a.data.has_client),_l.running=Boolean(a.data.running);try{const e=await Ge.api.get(`plugin/${l}/get_config`);e&&(Object.assign(Ge.initialConfig,e),console.log("已获取最新配置:",Ge.initialConfig))}catch(e){console.error("获取配置失败:",e)}tl.value=!0}catch(l){l.message.includes("使用配置数据显示状态")||(il.value=`获取状态失败: ${l.message||"未知错误"}`),console.error("获取状态失败:",l)}finally{Xe.value=!1}},zl=async()=>{Ye.value=!0,await Cl(),_l.has_client&&Ge.initialConfig?.cookies?await aa():(yl.loading=!1,hl.loading=!1,Ge.initialConfig?.cookies?_l.has_client||(yl.error="115客户端未连接或Cookie无效。",hl.error="115客户端未连接或Cookie无效。"):(yl.error="请先配置115 Cookie。",hl.error="请先配置115 Cookie。")),Ye.value=!1,sl.value="状态已刷新",nl.value="success",setTimeout(()=>{sl.value=null},3e3)},Pl=async()=>{ol.value=!1,await Ml()},Vl=async()=>{cl.value=!1,await Sl()},Ml=async()=>{el.value=!0,rl.value=!0,il.value=null,sl.value=null;try{if(!_l.enabled)throw new Error("插件未启用，请先在配置页面启用插件");if(!_l.has_client)throw new Error("插件未配置Cookie或Cookie无效，请先在配置页面设置115 Cookie");if(0===kl(Ge.initialConfig?.full_sync_strm_paths))throw new Error("未配置全量同步路径，请先在配置页面设置同步路径");const e="P115StrmHelper",l=await Ge.api.post(`plugin/${e}/full_sync`);if(!l||0!==l.code)throw new Error(l?.msg||"启动全量同步失败");sl.value=l.msg||"全量同步任务已启动",nl.value="success",await Cl()}catch(e){il.value=`启动全量同步失败: ${e.message||"未知错误"}`,console.error("启动全量同步失败:",e)}finally{el.value=!1,rl.value=!1}},Sl=async()=>{ll.value=!0,rl.value=!0,il.value=null,sl.value=null;try{if(!_l.enabled)throw new Error("插件未启用，请先在配置页面启用插件");if(!_l.has_client)throw new Error("插件未配置Cookie或Cookie无效，请先在配置页面设置115 Cookie");const e="P115StrmHelper",l=await Ge.api.post(`plugin/${e}/full_sync_db`);if(!l||0!==l.code)throw new Error(l?.msg||"启动全量同步数据库失败");sl.value=l.msg||"全量同步数据库任务已启动",nl.value="success",await Cl()}catch(e){il.value=`启动全量同步数据库失败: ${e.message||"未知错误"}`,console.error("启动全量同步数据库失败:",e)}finally{ll.value=!1,rl.value=!1}},Tl=De({show:!1,error:null,configs:[],globalMediaservers:[],globalMpMediaserverPaths:""}),$l=De({show:!1,error:null,editingIndex:-1,shareLink:"",shareCode:"",shareReceive:"",sharePath:"/",localPath:"",minFileSizeFormatted:"",moviepilotTransfer:!1,autoDownloadMediainfo:!1,mediaServerRefresh:!1,scrapeMetadata:!1}),Ul=He([]),El=Ne(()=>Tl.configs.length>0&&Tl.configs.every(e=>!!e.local_path&&(!(!e.share_link&&!e.share_code)&&!(e.share_code&&!e.share_receive)))),Il=Ne(()=>!!$l.localPath&&(!(!$l.shareLink&&!$l.shareCode)&&!($l.shareCode&&!$l.shareReceive))),Rl=De({show:!1,isLocal:!0,loading:!1,error:null,currentPath:"/",items:[],selectedPath:"",callback:null}),Ll=()=>{Tl.show=!0,Tl.error=null,Ge.initialConfig&&(Tl.configs=Array.isArray(Ge.initialConfig.share_strm_config)?JSON.parse(JSON.stringify(Ge.initialConfig.share_strm_config)):[],Tl.globalMediaservers=Array.isArray(Ge.initialConfig.share_strm_mediaservers)?[...Ge.initialConfig.share_strm_mediaservers]:[],Tl.globalMpMediaserverPaths=Ge.initialConfig.share_strm_mp_mediaserver_paths||"")},Fl=()=>{Tl.show=!1,Tl.configs=[],Tl.error=null},Bl=()=>{$l.editingIndex=-1,$l.shareLink="",$l.shareCode="",$l.shareReceive="",$l.sharePath="/",$l.localPath="",$l.minFileSizeFormatted="",$l.moviepilotTransfer=!1,$l.autoDownloadMediainfo=!1,$l.mediaServerRefresh=!1,$l.scrapeMetadata=!1,$l.error=null,$l.show=!0},jl=()=>{$l.show=!1,$l.editingIndex=-1,$l.error=null},Al=()=>{if($l.error=null,!Il.value)return void($l.error="请填写必填项");const e={share_link:$l.shareLink||null,share_code:$l.shareCode||null,share_receive:$l.shareReceive||null,share_path:$l.sharePath||null,local_path:$l.localPath,min_file_size:Ze($l.minFileSizeFormatted)||null,moviepilot_transfer:$l.moviepilotTransfer,auto_download_mediainfo:!$l.moviepilotTransfer&&$l.autoDownloadMediainfo,media_server_refresh:!$l.moviepilotTransfer&&$l.mediaServerRefresh,scrape_metadata:!$l.moviepilotTransfer&&$l.scrapeMetadata};$l.editingIndex>=0?Tl.configs[$l.editingIndex]=e:Tl.configs.push(e),jl()},Ol=async()=>{Rl.loading=!0,Rl.error=null,Rl.items=[];try{if(Rl.isLocal)try{const e=await Ge.api.post("storage/list",{path:Rl.currentPath||"/",type:"share",flag:"ROOT"});if(!e||!Array.isArray(e))throw new Error("浏览目录失败：无效响应");Rl.items=e.filter(e=>"dir"===e.type).map(e=>({name:e.name,path:e.path,is_dir:!0})).sort((e,l)=>e.name.localeCompare(l.name,void 0,{numeric:!0,sensitivity:"base"}))}catch(il){console.error("浏览本地目录失败:",il),Rl.error=`浏览本地目录失败: ${il.message||"未知错误"}`,Rl.items=[]}else{const e="P115StrmHelper";if(!Ge.initialConfig?.cookies||""===Ge.initialConfig?.cookies.trim())throw new Error("请先设置115 Cookie才能浏览网盘目录");const l=await Ge.api.get(`plugin/${e}/browse_dir?path=${encodeURIComponent(Rl.currentPath)}&is_local=${Rl.isLocal}`);if(!l||0!==l.code||!l.data)throw new Error(l?.msg||"获取网盘目录内容失败");Rl.items=l.data.items.filter(e=>e.is_dir),Rl.currentPath=l.data.path||Rl.currentPath}}catch(il){console.error("加载目录内容失败:",il),Rl.error=il.message||"获取目录内容失败",(il.message.includes("Cookie")||il.message.includes("cookie"))&&(Rl.items=[])}finally{Rl.loading=!1}},Hl=()=>{const e=Rl.currentPath;if(!Rl.isLocal){if("/"===e)return;let l=e.replace(/\\/g,"/");l.length>1&&l.endsWith("/")&&(l=l.slice(0,-1));const a=l.substring(0,l.lastIndexOf("/"));return Rl.currentPath=""===a?"/":a,void Ol()}if("/"===e||"C:\\"===e||"C:/"===e)return;const l=e.replace(/\\/g,"/"),a=l.split("/").filter(Boolean);0===a.length?Rl.currentPath="/":1===a.length&&l.includes(":")?Rl.currentPath=a[0]+":/":(a.pop(),Rl.currentPath=0===a.length?"/":(l.startsWith("/")?"/":"")+a.join("/")+"/"),Ol()},Dl=()=>{if(!Rl.currentPath)return;let e=Rl.currentPath;"/"===e||/^[a-zA-Z]:[\\\/]$/.test(e)||!e.endsWith("/")&&!e.endsWith("\\\\")||(e=e.slice(0,-1)),"function"==typeof Rl.callback&&Rl.callback(e),Nl()},Nl=()=>{Rl.show=!1,Rl.items=[],Rl.error=null},Wl=async()=>{al.value=!0,Tl.error=null;try{if(0===Tl.configs.length)throw new Error("请至少添加一个分享配置");const e="P115StrmHelper";Ge.initialConfig&&(Ge.initialConfig.share_strm_config=Tl.configs,Ge.initialConfig.share_strm_mediaservers=Tl.globalMediaservers.length>0?[...Tl.globalMediaservers]:null,Ge.initialConfig.share_strm_mp_mediaserver_paths=Tl.globalMpMediaserverPaths||null,await Ge.api.post(`plugin/${e}/save_config`,Ge.initialConfig));const l=await Ge.api.post(`plugin/${e}/share_sync`);if(!l||0!==l.code)throw new Error(l?.msg||"启动分享同步失败");sl.value=l.msg||"分享同步任务已启动",nl.value="success",await Cl(),Fl()}catch(e){Tl.error=`启动分享同步失败: ${e.message||"未知错误"}`,console.error("启动分享同步失败:",e)}finally{al.value=!1}},ql=()=>{vl.show=!0,vl.activeTab="tasks",vl.error=null,vl.addError=null},Kl=()=>{vl.show=!1,vl.tasks=[],vl.totalTasks=0,vl.links="",vl.destPath=""},Gl=async({page:e,itemsPerPage:l})=>{vl.loading=!0,vl.error=null;try{const a="P115StrmHelper",t=await Ge.api.post(`plugin/${a}/offline_tasks`,{page:e,limit:l});if(!t||0!==t.code||!t.data)throw new Error(t?.msg||"获取离线任务列表失败");vl.tasks=t.data.tasks||[],vl.totalTasks=t.data.total||0}catch(a){vl.error=`获取任务失败: ${a.message||"未知错误"}`,console.error("获取离线任务失败:",a),vl.tasks=[],vl.totalTasks=0}finally{vl.loading=!1}},Jl=async()=>{if(vl.links.trim()){vl.adding=!0,vl.addError=null;try{const e="P115StrmHelper",l=vl.links.split("\n").map(e=>e.trim()).filter(Boolean),a=await Ge.api.post(`plugin/${e}/add_offline_task`,{links:l,path:vl.destPath||null});if(!a||0!==a.code)throw new Error(a?.msg||"添加离线任务失败");sl.value=a.msg||"离线任务添加成功",nl.value="success",vl.links="",vl.destPath="",vl.activeTab="tasks",Gl({page:1,itemsPerPage:vl.itemsPerPage})}catch(e){vl.addError=`添加任务失败: ${e.message||"未知错误"}`,console.error("添加离线任务失败:",e)}finally{vl.adding=!1}}else vl.addError="下载链接不能为空。"},Zl=()=>{Rl.show=!0,Rl.isLocal=!1,Rl.loading=!1,Rl.error=null,Rl.items=[],Rl.currentPath=vl.destPath||"/",Rl.callback=e=>{vl.destPath=e},Ol()},Ql=e=>{switch(e){case 0:return"info";case 1:return"error";case 2:return"success";case 3:return"warning";default:return"grey"}},Xl=e=>{if(!e)return[];try{return e.split("\n").filter(e=>e.trim()&&e.includes("#")).map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}})}catch(l){return console.error("解析路径字符串失败:",l),[]}},Yl=e=>{if(!e)return[];try{return e.split("\n").filter(e=>e.trim()).map(e=>({path:e}))}catch(l){return console.error("解析网盘整理路径字符串失败:",l),[]}};Ke(()=>Ge.initialConfig,e=>{e&&(_l.enabled=e.enabled||!1,_l.has_client=Boolean(e.cookies&&""!==e.cookies.trim()),e.sync_del_enabled?(ea(),pl&&clearInterval(pl),pl=setInterval(()=>{Ge.initialConfig?.sync_del_enabled&&ea()},3e4)):(dl.value=[],pl&&(clearInterval(pl),pl=null)))},{immediate:!0});const ea=async()=>{if(Ge.initialConfig?.sync_del_enabled){ul.value=!0;try{const e="P115StrmHelper",l=await Ge.api.get(`plugin/${e}/get_sync_del_history`);l&&l.success&&l.data?dl.value=Array.isArray(l.data)?l.data.sort((e,l)=>{const a=new Date(e.del_time||0).getTime();return new Date(l.del_time||0).getTime()-a}):[]:dl.value=[]}catch(e){console.error("加载同步删除历史失败:",e),dl.value=[]}finally{ul.value=!1}}else dl.value=[]},la=async e=>{if(e){ml.value=e;try{const l="P115StrmHelper",a=await Ge.api.get("system/config?key=app.api_token"),t=a?.value||"",i=await Ge.api.get(`plugin/${l}/delete_sync_del_history?key=${encodeURIComponent(e)}&apikey=${encodeURIComponent(t)}`);i&&i.success?(sl.value="删除成功",nl.value="success",await ea()):(sl.value=i?.message||"删除失败",nl.value="error")}catch(l){console.error("删除同步删除历史失败:",l),sl.value=`删除失败: ${l.message||"未知错误"}`,nl.value="error"}finally{ml.value=null}}};async function aa(){yl.loading=!0,yl.error=null,hl.loading=!0,hl.error=null;try{const e="P115StrmHelper",l=await Ge.api.get(`plugin/${e}/user_storage_status`);if(l&&l.success)l.user_info?Object.assign(yl,l.user_info):yl.error="未能获取有效的用户信息。",l.storage_info?Object.assign(hl,l.storage_info):hl.error="未能获取有效的存储空间信息。";else{const e=l?.error_message||"获取用户和存储信息失败。";yl.error=e,hl.error=e,(e.includes("Cookie")||e.includes("未配置"))&&(_l.has_client=!1)}}catch(e){console.error("获取用户/存储状态失败:",e);const l=`请求用户/存储状态时出错: ${e.message||"未知网络错误"}`;yl.error=l,hl.error=l}finally{yl.loading=!1,hl.loading=!1}}return We(async()=>{await Cl(),_l.has_client&&Ge.initialConfig?.cookies?await aa():(yl.loading=!1,hl.loading=!1,Ge.initialConfig?.cookies?_l.has_client||(yl.error="115客户端未连接或Cookie无效。",hl.error="115客户端未连接或Cookie无效。"):(yl.error="请先配置115 Cookie。",hl.error="请先配置115 Cookie。"));try{const e="P115StrmHelper",l=await Ge.api.get(`plugin/${e}/get_config`);l&&l.mediaservers&&(Ul.value=l.mediaservers)}catch(e){console.error("加载媒体服务器列表失败:",e)}Ge.initialConfig?.sync_del_enabled&&(await ea(),pl=setInterval(()=>{Ge.initialConfig?.sync_del_enabled&&ea()},3e4))}),qe(()=>{pl&&(clearInterval(pl),pl=null)}),(l,He)=>{const De=a("v-icon"),Ne=a("v-card-title"),We=a("v-alert"),qe=a("v-skeleton-loader"),Ke=a("v-list-item-title"),Ge=a("v-chip"),Ze=a("v-list-item"),pl=a("v-divider"),Cl=a("v-list"),Ml=a("v-card-text"),Sl=a("v-card"),aa=a("v-img"),ta=a("v-avatar"),ia=a("v-list-item-subtitle"),sa=a("v-progress-linear"),na=a("v-spacer"),ra=a("v-btn"),oa=a("v-col"),ca=a("v-row"),da=a("v-menu"),ua=a("v-card-actions"),ma=a("v-select"),pa=a("v-textarea"),fa=a("v-dialog"),ga=a("v-text-field"),_a=a("v-switch"),ya=a("v-expand-transition"),ha=a("v-tab"),va=a("v-tabs"),xa=a("v-data-table-server"),ba=a("v-window-item"),ka=a("v-window"),wa=a("v-progress-circular");return o(),u(p,null,[i("div",h,[t(Sl,{flat:"",class:"rounded border",style:{display:"flex","flex-direction":"column","max-height":"85vh"}},{default:s(()=>[t(Ne,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(De,{icon:"mdi-file-link",class:"mr-2",color:"primary",size:"small"}),He[41]||(He[41]=i("span",null,"115网盘STRM助手",-1))]),_:1}),t(Ml,{class:"px-3 py-1",style:{"flex-grow":"1","overflow-y":"auto","padding-bottom":"48px"}},{default:s(()=>[il.value?(o(),c(We,{key:0,type:"error",density:"compact",class:"mb-2",variant:"tonal",closable:""},{default:s(()=>[r(n(il.value),1)]),_:1})):d("",!0),sl.value?(o(),c(We,{key:1,type:nl.value,density:"compact",class:"mb-2",variant:"tonal",closable:""},{default:s(()=>[r(n(sl.value),1)]),_:1},8,["type"])):d("",!0),Xe.value&&!tl.value?(o(),c(qe,{key:2,type:"article, actions"})):d("",!0),tl.value?(o(),u("div",v,[t(ca,null,{default:s(()=>[t(oa,{cols:"12",md:"6"},{default:s(()=>[t(Sl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(Ne,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(De,{icon:"mdi-information",class:"mr-2",color:"primary",size:"small"}),He[42]||(He[42]=i("span",null,"系统状态",-1))]),_:1}),t(Ml,{class:"pa-0"},{default:s(()=>[t(Cl,{class:"bg-transparent pa-0"},{default:s(()=>[t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:_l.enabled?"success":"grey",icon:"mdi-power",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:_l.enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(_l.enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[43]||(He[43]=[r("插件状态")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:_l.has_client&&e.initialConfig?.cookies?"success":"error",icon:"mdi-account-check",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:_l.has_client&&e.initialConfig?.cookies?"success":"error",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(_l.has_client&&e.initialConfig?.cookies?"已连接":"未连接"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[44]||(He[44]=[r("115客户端状态")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:_l.running?"warning":"success",icon:"mdi-play-circle",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:_l.running?"warning":"success",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(_l.running?"运行中":"空闲"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[45]||(He[45]=[r("任务状态")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Sl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(Ne,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(De,{icon:"mdi-account-box",class:"mr-2",color:"primary",size:"small"}),He[46]||(He[46]=i("span",null,"115账户信息",-1))]),_:1}),t(Ml,{class:"pa-0"},{default:s(()=>[yl.loading||hl.loading?(o(),c(qe,{key:0,type:"list-item-avatar-three-line, list-item-three-line"})):(o(),u("div",x,[yl.error||hl.error?(o(),c(We,{key:0,type:"warning",density:"compact",class:"ma-2",variant:"tonal"},{default:s(()=>[r(n(yl.error||hl.error),1)]),_:1})):(o(),c(Cl,{key:1,class:"bg-transparent pa-0"},{default:s(()=>[t(Ze,{class:"px-3 py-1"},{prepend:s(()=>[t(ta,{size:"32",class:"mr-2"},{default:s(()=>[yl.avatar?(o(),c(aa,{key:0,src:yl.avatar,alt:yl.name},null,8,["src","alt"])):(o(),c(De,{key:1,icon:"mdi-account-circle"}))]),_:1})]),default:s(()=>[t(Ke,{class:"text-body-1 font-weight-medium"},{default:s(()=>[r(n(yl.name||"未知用户"),1)]),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-1"},{prepend:s(()=>[t(De,{color:yl.is_vip?"amber-darken-2":"grey",icon:"mdi-shield-crown",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:yl.is_vip?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(yl.is_vip?yl.is_forever_vip?"永久VIP":`VIP (至 ${yl.vip_expire_date||"N/A"})`:"非VIP"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[47]||(He[47]=[r("VIP状态")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-1"},{default:s(()=>[t(Ke,{class:"text-body-2 mb-1"},{default:s(()=>He[48]||(He[48]=[r("存储空间")])),_:1}),hl.used&&hl.total?(o(),c(ia,{key:0,class:"text-caption"},{default:s(()=>[r(" 已用 "+n(hl.used)+" / 总共 "+n(hl.total)+" (剩余 "+n(hl.remaining)+") ",1)]),_:1})):d("",!0),hl.used&&hl.total?(o(),c(sa,{key:1,"model-value":xl(hl.used,hl.total),color:"primary",height:"6",rounded:"",class:"mt-1"},null,8,["model-value"])):(o(),c(ia,{key:2,class:"text-caption text-grey"},{default:s(()=>He[49]||(He[49]=[r(" 存储信息不可用 ")])),_:1}))]),_:1})]),_:1}))]))]),_:1})]),_:1}),t(Sl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(Ne,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(De,{icon:"mdi-puzzle",class:"mr-2",color:"primary",size:"small"}),He[50]||(He[50]=i("span",null,"功能配置",-1))]),_:1}),t(Ml,{class:"pa-0"},{default:s(()=>[t(Cl,{class:"bg-transparent pa-0"},{default:s(()=>[t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:e.initialConfig?.transfer_monitor_enabled?"success":"grey",icon:"mdi-file-move",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:e.initialConfig?.transfer_monitor_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(e.initialConfig?.transfer_monitor_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[51]||(He[51]=[r("监控MP整理")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:e.initialConfig?.timing_full_sync_strm?"success":"grey",icon:"mdi-sync",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:e.initialConfig?.timing_full_sync_strm?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(e.initialConfig?.timing_full_sync_strm?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[52]||(He[52]=[r("定期全量同步")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:e.initialConfig?.increment_sync_strm_enabled?"success":"grey",icon:"mdi-book-sync",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:e.initialConfig?.increment_sync_strm_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(e.initialConfig?.increment_sync_strm_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[53]||(He[53]=[r("定期增量同步")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:e.initialConfig?.monitor_life_enabled?"success":"grey",icon:"mdi-calendar-heart",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:e.initialConfig?.monitor_life_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(e.initialConfig?.monitor_life_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[54]||(He[54]=[r("监控115生活事件")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:e.initialConfig?.pan_transfer_enabled?"success":"grey",icon:"mdi-transfer",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:e.initialConfig?.pan_transfer_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(e.initialConfig?.pan_transfer_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[55]||(He[55]=[r("网盘整理")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"success":"grey",icon:"mdi-broom",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[56]||(He[56]=[r("定期清理")])),_:1})]),_:1}),t(pl,{class:"my-0"}),t(Ze,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(De,{color:e.initialConfig?.sync_del_enabled?"warning":"grey",icon:"mdi-delete-sweep",size:"small"},null,8,["color"])]),append:s(()=>[t(Ge,{color:e.initialConfig?.sync_del_enabled?"warning":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[r(n(e.initialConfig?.sync_del_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[57]||(He[57]=[r("同步删除")])),_:1})]),_:1}),t(pl,{class:"my-0"})]),_:1})]),_:1})]),_:1}),e.initialConfig?.sync_del_enabled?(o(),c(Sl,{key:0,flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(Ne,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(De,{icon:"mdi-history",class:"mr-2",color:"primary",size:"small"}),He[59]||(He[59]=i("span",null,"同步删除历史",-1)),t(na),dl.value.length>6?(o(),c(ra,{key:0,size:"x-small",variant:"text",onClick:He[0]||(He[0]=e=>gl.show=!0),"prepend-icon":"mdi-open-in-new"},{default:s(()=>[r(" 查看全部 ("+n(dl.value.length)+") ",1)]),_:1})):d("",!0),t(ra,{icon:"",size:"x-small",variant:"text",onClick:ea,loading:ul.value,class:"ml-1"},{default:s(()=>[t(De,null,{default:s(()=>He[58]||(He[58]=[r("mdi-refresh")])),_:1})]),_:1},8,["loading"])]),_:1}),t(Ml,{class:"pa-0"},{default:s(()=>[ul.value?(o(),c(qe,{key:0,type:"list-item-avatar-three-line@3"})):0===dl.value.length?(o(),u("div",b,[t(De,{icon:"mdi-information-outline",size:"large",color:"grey",class:"mb-2"}),He[60]||(He[60]=i("div",{class:"text-caption text-grey"},"暂无删除历史",-1))])):(o(),c(Cl,{key:2,class:"bg-transparent pa-0"},{default:s(()=>[(o(!0),u(p,null,m(fl.value,(e,l)=>(o(),u(p,{key:e.unique||l},[t(Ze,{class:"px-3 py-2"},{prepend:s(()=>[t(ta,{size:"48",rounded:"",class:"mr-3"},{default:s(()=>[e.image?(o(),c(aa,{key:0,src:e.image,alt:e.title,cover:""},null,8,["src","alt"])):(o(),c(De,{key:1,icon:"mdi-movie"}))]),_:2},1024)]),append:s(()=>[t(ra,{icon:"",size:"x-small",variant:"text",color:"error",onClick:l=>la(e.unique),loading:ml.value===e.unique},{default:s(()=>[t(De,null,{default:s(()=>He[61]||(He[61]=[r("mdi-delete")])),_:1})]),_:2},1032,["onClick","loading"])]),default:s(()=>[t(Ke,{class:"text-body-2 font-weight-medium"},{default:s(()=>[r(n(e.title),1)]),_:2},1024),t(ia,{class:"text-caption"},{default:s(()=>[i("div",k,[t(Ge,{size:"x-small",variant:"tonal",color:"primary"},{default:s(()=>[r(n(e.type),1)]),_:2},1024),e.year?(o(),u("span",w,"· "+n(e.year),1)):d("",!0),e.season?(o(),u("span",C,"· S"+n(String(e.season).padStart(2,"0")),1)):d("",!0),e.episode?(o(),u("span",z,"· E"+n(String(e.episode).padStart(2,"0")),1)):d("",!0)]),i("div",P,n(e.del_time),1)]),_:2},1024)]),_:2},1024),l<fl.value.length-1?(o(),c(pl,{key:0,class:"my-0"})):d("",!0)],64))),128))]),_:1}))]),_:1})]),_:1})):d("",!0)]),_:1}),t(oa,{cols:"12",md:"6"},{default:s(()=>[t(Sl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(Ne,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(De,{icon:"mdi-folder-search",class:"mr-2",color:"primary",size:"small"}),He[62]||(He[62]=i("span",null,"路径配置",-1))]),_:1}),t(Ml,{class:"pa-0"},{default:s(()=>[t(Cl,{class:"bg-transparent pa-0"},{default:s(()=>[e.initialConfig?.transfer_monitor_enabled?(o(),c(Ze,{key:0,class:"px-3 py-2"},{default:s(()=>[i("div",null,[He[68]||(He[68]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"监控MP整理路径",-1)),kl(e.initialConfig?.transfer_monitor_paths)>0?(o(!0),u(p,{key:0},m(Xl(e.initialConfig?.transfer_monitor_paths),(e,l)=>(o(),u(p,{key:`transfer-${l}`},[l>0?(o(),c(pl,{key:0,class:"my-1"})):d("",!0),i("div",V,[t(ca,{dense:"",align:"center"},{default:s(()=>[t(oa,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>He[63]||(He[63]=[r("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[He[64]||(He[64]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",S,n(e.local||"-"),1)],8,M)]),_:2},1024),t(oa,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:s(()=>[t(De,{color:"primary",class:"icon-spin-animation"},{default:s(()=>He[65]||(He[65]=[r("mdi-sync")])),_:1})]),_:1}),t(oa,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>He[66]||(He[66]=[r("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[He[67]||(He[67]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",$,n(e.remote||"-"),1)],8,T)]),_:2},1024)]),_:2},1024)])],64))),128)):(o(),u("div",U,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.transfer_monitor_enabled&&(e.initialConfig?.increment_sync_strm_enabled||e.initialConfig?.timing_full_sync_strm||e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(o(),c(pl,{key:1,class:"my-0"})):d("",!0),e.initialConfig?.timing_full_sync_strm?(o(),c(Ze,{key:2,class:"px-3 py-2"},{default:s(()=>[i("div",null,[He[74]||(He[74]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"全量同步路径",-1)),kl(e.initialConfig?.full_sync_strm_paths)>0?(o(!0),u(p,{key:0},m(Xl(e.initialConfig?.full_sync_strm_paths),(e,l)=>(o(),u(p,{key:`fullsync-${l}`},[l>0?(o(),c(pl,{key:0,class:"my-1"})):d("",!0),i("div",E,[t(ca,{dense:"",align:"center"},{default:s(()=>[t(oa,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>He[69]||(He[69]=[r("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[He[70]||(He[70]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",R,n(e.local||"-"),1)],8,I)]),_:2},1024),t(oa,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:s(()=>[t(De,{color:"primary",class:"icon-spin-animation"},{default:s(()=>He[71]||(He[71]=[r("mdi-sync")])),_:1})]),_:1}),t(oa,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>He[72]||(He[72]=[r("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[He[73]||(He[73]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",F,n(e.remote||"-"),1)],8,L)]),_:2},1024)]),_:2},1024)])],64))),128)):(o(),u("div",B,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.timing_full_sync_strm&&(e.initialConfig?.increment_sync_strm_enabled||e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(o(),c(pl,{key:3,class:"my-0"})):d("",!0),e.initialConfig?.increment_sync_strm_enabled?(o(),c(Ze,{key:4,class:"px-3 py-2"},{default:s(()=>[i("div",null,[He[80]||(He[80]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"增量同步路径",-1)),kl(e.initialConfig?.increment_sync_strm_paths)>0?(o(!0),u(p,{key:0},m(Xl(e.initialConfig?.increment_sync_strm_paths),(e,l)=>(o(),u(p,{key:`incsync-${l}`},[l>0?(o(),c(pl,{key:0,class:"my-1"})):d("",!0),i("div",j,[t(ca,{dense:"",align:"center"},{default:s(()=>[t(oa,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>He[75]||(He[75]=[r("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[He[76]||(He[76]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",O,n(e.local||"-"),1)],8,A)]),_:2},1024),t(oa,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:s(()=>[t(De,{color:"primary",class:"icon-spin-animation"},{default:s(()=>He[77]||(He[77]=[r("mdi-sync")])),_:1})]),_:1}),t(oa,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>He[78]||(He[78]=[r("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[He[79]||(He[79]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",D,n(e.remote||"-"),1)],8,H)]),_:2},1024)]),_:2},1024)])],64))),128)):(o(),u("div",N,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.increment_sync_strm_enabled&&(e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(o(),c(pl,{key:5,class:"my-0"})):d("",!0),e.initialConfig?.monitor_life_enabled?(o(),c(Ze,{key:6,class:"px-3 py-2"},{default:s(()=>[i("div",null,[He[86]||(He[86]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"监控115生活事件路径",-1)),kl(e.initialConfig?.monitor_life_paths)>0?(o(!0),u(p,{key:0},m(Xl(e.initialConfig?.monitor_life_paths),(e,l)=>(o(),u(p,{key:`life-${l}`},[l>0?(o(),c(pl,{key:0,class:"my-1"})):d("",!0),i("div",W,[t(ca,{dense:"",align:"center"},{default:s(()=>[t(oa,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>He[81]||(He[81]=[r("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[He[82]||(He[82]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",K,n(e.local||"-"),1)],8,q)]),_:2},1024),t(oa,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:s(()=>[t(De,{color:"primary",class:"icon-spin-animation"},{default:s(()=>He[83]||(He[83]=[r("mdi-sync")])),_:1})]),_:1}),t(oa,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>He[84]||(He[84]=[r("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[He[85]||(He[85]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",J,n(e.remote||"-"),1)],8,G)]),_:2},1024)]),_:2},1024)])],64))),128)):(o(),u("div",Z,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.monitor_life_enabled&&(e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(o(),c(pl,{key:7,class:"my-0"})):d("",!0),e.initialConfig?.pan_transfer_enabled?(o(),c(Ze,{key:8,class:"px-3 py-2"},{default:s(()=>[i("div",null,[He[89]||(He[89]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"网盘整理目录",-1)),wl(e.initialConfig?.pan_transfer_paths)>0?(o(!0),u(p,{key:0},m(Yl(e.initialConfig?.pan_transfer_paths),(e,l)=>(o(),u(p,{key:`pan-${l}`},[l>0?(o(),c(pl,{key:0,class:"my-1"})):d("",!0),i("div",Q,[i("div",X,[t(De,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>He[87]||(He[87]=[r("mdi-folder-arrow-down")])),_:1}),i("div",{class:"text-truncate w-100",title:e.path},[He[88]||(He[88]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"待整理网盘目录",-1)),i("span",ee,n(e.path),1)],8,Y)])])],64))),128)):(o(),u("div",le,"未配置网盘整理目录"))])]),_:1})):d("",!0),e.initialConfig?.pan_transfer_enabled&&e.initialConfig?.directory_upload_enabled?(o(),c(pl,{key:9,class:"my-0"})):d("",!0),e.initialConfig?.directory_upload_enabled?(o(),c(Ze,{key:10,class:"px-3 py-2"},{default:s(()=>[i("div",null,[He[97]||(He[97]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"目录上传路径",-1)),e.initialConfig?.directory_upload_path&&e.initialConfig.directory_upload_path.length>0?(o(!0),u(p,{key:0},m(e.initialConfig.directory_upload_path,(e,l)=>(o(),u(p,{key:`upload-group-${l}`},[l>0?(o(),c(pl,{key:0,class:"my-1"})):d("",!0),i("div",ae,[t(ca,{dense:"",align:"center"},{default:s(()=>[t(oa,{cols:"12",md:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>He[90]||(He[90]=[r("mdi-folder-table")])),_:1}),i("div",{class:"text-truncate w-100",title:e.src},[He[91]||(He[91]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地监控",-1)),i("span",ie,n(e.src||"-"),1)],8,te)]),_:2},1024),t(oa,{cols:"12",md:"2",class:"text-center my-1 my-md-0"},{default:s(()=>[t(De,{color:"primary",class:"icon-spin-animation"},{default:s(()=>He[92]||(He[92]=[r("mdi-sync")])),_:1})]),_:1}),t(oa,{cols:"12",md:"5",class:"d-flex align-center"},{default:s(()=>[t(De,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>He[93]||(He[93]=[r("mdi-cloud-upload")])),_:1}),i("div",{class:"text-truncate w-100",title:e.dest_remote},[He[94]||(He[94]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘上传",-1)),i("span",ne,n(e.dest_remote||"-"),1)],8,se)]),_:2},1024)]),_:2},1024),e.dest_local||"boolean"==typeof e.delete?(o(),u("div",re,[t(ca,{dense:"",align:"center",class:"mt-1"},{default:s(()=>[t(oa,{cols:"12",md:"boolean"==typeof e.delete?7:12},{default:s(()=>[e.dest_local?(o(),u("div",oe,[t(De,{size:"small",color:"warning",class:"mr-2 flex-shrink-0"},{default:s(()=>He[95]||(He[95]=[r("mdi-content-copy")])),_:1}),i("div",{class:"text-truncate w-100",title:e.dest_local},[He[96]||(He[96]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地复制",-1)),i("span",de,n(e.dest_local),1)],8,ce)])):d("",!0)]),_:2},1032,["md"]),"boolean"==typeof e.delete?(o(),c(oa,{key:0,cols:"12",md:e.dest_local?5:12,class:f(["d-flex align-center",{"justify-md-end":e.dest_local,"mt-1 mt-md-0":e.dest_local}])},{default:s(()=>[t(De,{size:"small",color:e.delete?"error":"grey-darken-1",class:"mr-1 flex-shrink-0"},{default:s(()=>[r(n(e.delete?"mdi-delete":"mdi-delete-off"),1)]),_:2},1032,["color"]),i("span",{class:f(["text-caption",e.delete?"text-error":"text-grey-darken-1"])},n(e.delete?"删除源":"不删源"),3)]),_:2},1032,["md","class"])):d("",!0)]),_:2},1024)])):d("",!0)])],64))),128)):(o(),u("div",ue,"未配置路径"))])]),_:1})):d("",!0)]),_:1})]),_:1})]),_:1}),_l.has_client&&e.initialConfig.cookies?bl.value?d("",!0):(o(),c(Sl,{key:1,flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(Ml,{class:"pa-3"},{default:s(()=>[i("div",fe,[t(De,{icon:"mdi-alert-circle",color:"warning",class:"mr-2",size:"small"}),i("div",ge,[He[104]||(He[104]=i("p",{class:"mb-1"},[i("strong",null,"路径配置不完整")],-1)),He[105]||(He[105]=i("p",{class:"mb-0"},"您已配置115 Cookie，但部分功能路径未配置。请前往配置页面完善路径设置。",-1)),t(ra,{color:"primary",variant:"text",size:"small",class:"mt-1 px-2 py-0",onClick:He[2]||(He[2]=e=>Je("switch"))},{default:s(()=>[t(De,{size:"small",class:"mr-1"},{default:s(()=>He[102]||(He[102]=[r("mdi-cog")])),_:1}),He[103]||(He[103]=r("前往配置 "))]),_:1})])])]),_:1})]),_:1})):(o(),c(Sl,{key:0,flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(Ml,{class:"pa-3"},{default:s(()=>[i("div",me,[t(De,{icon:"mdi-alert-circle",color:"error",class:"mr-2",size:"small"}),i("div",pe,[He[100]||(He[100]=i("p",{class:"mb-1"},[i("strong",null,"未配置115 Cookie或Cookie无效")],-1)),He[101]||(He[101]=i("p",{class:"mb-0"},"请在配置页面中设置有效的115网盘Cookie，可通过扫码登录获取。",-1)),t(ra,{color:"primary",variant:"text",size:"small",class:"mt-1 px-2 py-0",onClick:He[1]||(He[1]=e=>Je("switch"))},{default:s(()=>[t(De,{size:"small",class:"mr-1"},{default:s(()=>He[98]||(He[98]=[r("mdi-cog")])),_:1}),He[99]||(He[99]=r("前往配置 "))]),_:1})])])]),_:1})]),_:1}))]),_:1})]),_:1}),t(Sl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(Ml,{class:"d-flex align-center px-3 py-1"},{default:s(()=>[t(De,{icon:"mdi-information",color:"info",class:"mr-2",size:"small"}),He[106]||(He[106]=i("span",{class:"text-body-2"},' 点击"配置"按钮进行设置，"全量同步"和"分享同步"按钮可立即执行相应任务。 ',-1))]),_:1})]),_:1})])):d("",!0)]),_:1}),t(pl),t(ua,{class:"px-2 py-1 sticky-actions d-flex justify-space-between align-center",style:{"flex-shrink":"0",gap:"8px"}},{default:s(()=>[t(ra,{color:"info",onClick:zl,"prepend-icon":"mdi-refresh",disabled:Ye.value,loading:Ye.value,variant:"text",size:"small"},{default:s(()=>He[107]||(He[107]=[r("刷新状态")])),_:1},8,["disabled","loading"]),i("div",_e,[t(da,{"offset-y":""},{activator:s(({props:e})=>[t(ra,g(e,{variant:"text",size:"small","append-icon":"mdi-dots-vertical"}),{default:s(()=>He[108]||(He[108]=[r(" 更多 ")])),_:2},1040)]),default:s(()=>[t(Cl,{density:"compact"},{default:s(()=>[t(Ze,{onClick:He[3]||(He[3]=e=>ol.value=!0),disabled:!_l.enabled||!_l.has_client||rl.value},{prepend:s(()=>[t(De,{color:"warning"},{default:s(()=>He[109]||(He[109]=[r("mdi-sync")])),_:1})]),default:s(()=>[t(Ke,null,{default:s(()=>He[110]||(He[110]=[r("全量同步")])),_:1})]),_:1},8,["disabled"]),t(Ze,{onClick:He[4]||(He[4]=e=>cl.value=!0),disabled:!_l.enabled||!_l.has_client||rl.value},{prepend:s(()=>[t(De,{color:"primary"},{default:s(()=>He[111]||(He[111]=[r("mdi-database-sync")])),_:1})]),default:s(()=>[t(Ke,null,{default:s(()=>He[112]||(He[112]=[r("全量同步数据库")])),_:1})]),_:1},8,["disabled"]),t(Ze,{onClick:Ll,disabled:!_l.enabled||!_l.has_client||rl.value,loading:al.value},{prepend:s(()=>[t(De,{color:"info"},{default:s(()=>He[113]||(He[113]=[r("mdi-share-variant")])),_:1})]),default:s(()=>[t(Ke,null,{default:s(()=>He[114]||(He[114]=[r("分享同步")])),_:1})]),_:1},8,["disabled","loading"]),t(Ze,{onClick:ql,disabled:!_l.enabled||!_l.has_client||rl.value},{prepend:s(()=>[t(De,{color:"secondary"},{default:s(()=>He[115]||(He[115]=[r("mdi-cloud-download-outline")])),_:1})]),default:s(()=>[t(Ke,null,{default:s(()=>He[116]||(He[116]=[r("离线下载")])),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),t(ra,{color:"primary",onClick:He[5]||(He[5]=e=>Je("switch")),"prepend-icon":"mdi-cog",variant:"text",size:"small"},{default:s(()=>He[117]||(He[117]=[r("配置")])),_:1}),t(ra,{color:"error",onClick:He[6]||(He[6]=e=>Je("close")),variant:"flat",size:"small",class:"custom-close-btn","aria-label":"关闭",style:{"min-width":"auto !important",padding:"0 10px !important",height:"28px !important","line-height":"28px !important"}},{default:s(()=>[t(De,{size:"small"},{default:s(()=>He[118]||(He[118]=[r("mdi-close")])),_:1})]),_:1})])]),_:1})]),_:1})]),t(fa,{modelValue:Tl.show,"onUpdate:modelValue":He[9]||(He[9]=e=>Tl.show=e),"max-width":"900",scrollable:""},{default:s(()=>[t(Sl,null,{default:s(()=>[t(Ne,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:s(()=>[t(De,{icon:"mdi-share-variant",class:"mr-2",color:"primary",size:"small"}),He[119]||(He[119]=i("span",null,"115网盘分享同步",-1)),t(na),t(ra,{icon:"mdi-close",variant:"text",size:"small",onClick:Fl})]),_:1}),t(Ml,{class:"px-3 py-2"},{default:s(()=>[Tl.error?(o(),c(We,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal"},{default:s(()=>[r(n(Tl.error),1)]),_:1})):d("",!0),t(Sl,{variant:"outlined",class:"mb-4"},{default:s(()=>[t(Ne,{class:"text-subtitle-2 px-3 py-2 bg-grey-lighten-4"},{default:s(()=>[t(De,{icon:"mdi-cog",size:"small",class:"mr-2"}),He[120]||(He[120]=r(" 全局配置 "))]),_:1}),t(Ml,{class:"pa-3"},{default:s(()=>[t(ca,null,{default:s(()=>[t(oa,{cols:"12"},{default:s(()=>[t(ma,{modelValue:Tl.globalMediaservers,"onUpdate:modelValue":He[7]||(He[7]=e=>Tl.globalMediaservers=e),label:"刷新媒体服务器",hint:"应用于所有分享配置的媒体服务器刷新设置","persistent-hint":"",items:Ul.value,multiple:"",chips:"","closable-chips":"",variant:"outlined",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),t(ca,{class:"mt-2"},{default:s(()=>[t(oa,{cols:"12"},{default:s(()=>[t(pa,{modelValue:Tl.globalMpMediaserverPaths,"onUpdate:modelValue":He[8]||(He[8]=e=>Tl.globalMpMediaserverPaths=e),label:"MP-媒体库 目录转换",hint:"格式：媒体库路径#MP路径，多个用换行分隔。应用于所有分享配置","persistent-hint":"",variant:"outlined",density:"compact",rows:"3","auto-grow":"",placeholder:"例如:\n/media#/mp\n/nas#/movie"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(Sl,{variant:"outlined"},{default:s(()=>[t(Ne,{class:"text-subtitle-2 px-3 py-2 bg-grey-lighten-4 d-flex align-center"},{default:s(()=>[t(De,{icon:"mdi-share-variant",size:"small",class:"mr-2"}),He[122]||(He[122]=i("span",{class:"flex-grow-1"},"分享配置列表",-1)),t(ra,{size:"small","prepend-icon":"mdi-plus",variant:"tonal",color:"primary",onClick:Bl},{default:s(()=>He[121]||(He[121]=[r(" 添加分享 ")])),_:1})]),_:1}),t(Ml,{class:"pa-0"},{default:s(()=>[Tl.configs.length>0?(o(),c(Cl,{key:0,class:"pa-0"},{default:s(()=>[(o(!0),u(p,null,m(Tl.configs,(e,l)=>(o(),u(p,{key:l},[t(Ze,{class:"px-3 py-2"},{prepend:s(()=>[t(De,{icon:"mdi-share-variant",color:"primary",size:"small",class:"mr-2"})]),append:s(()=>[i("div",we,[t(ra,{icon:"mdi-pencil",size:"small",variant:"text",color:"primary",onClick:e=>(e=>{if(e<0||e>=Tl.configs.length)return;const l=Tl.configs[e];$l.editingIndex=e,$l.shareLink=l.share_link||"",$l.shareCode=l.share_code||"",$l.shareReceive=l.share_receive||"",$l.sharePath=l.share_path||"/",$l.localPath=l.local_path||"",$l.minFileSizeFormatted=Qe(l.min_file_size||0),$l.moviepilotTransfer=l.moviepilot_transfer||!1,$l.autoDownloadMediainfo=l.auto_download_mediainfo||!1,$l.mediaServerRefresh=l.media_server_refresh||!1,$l.scrapeMetadata=l.scrape_metadata||!1,$l.error=null,$l.show=!0})(l),title:"编辑"},null,8,["onClick"]),t(ra,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:e=>(e=>{e>=0&&e<Tl.configs.length&&Tl.configs.splice(e,1)})(l),title:"删除"},null,8,["onClick"])])]),default:s(()=>[t(Ke,{class:"text-body-2 font-weight-medium"},{default:s(()=>[r(n(e.share_link||e.share_code||`分享配置 ${l+1}`),1)]),_:2},1024),t(ia,{class:"text-caption mt-1"},{default:s(()=>[i("div",ye,[e.local_path?(o(),u("span",he,[t(De,{icon:"mdi-folder",size:"x-small",class:"mr-1"}),r(" 本地路径: "+n(e.local_path),1)])):(o(),u("span",ve,"未配置本地路径")),i("div",xe,[e.share_path&&"/"!==e.share_path?(o(),u("span",be,[t(De,{icon:"mdi-folder-network",size:"x-small",class:"mr-1"}),r(" 分享路径: "+n(e.share_path),1)])):d("",!0),e.min_file_size?(o(),u("span",ke,[t(De,{icon:"mdi-file-size",size:"x-small",class:"mr-1"}),r(" 最小文件: "+n(Qe(e.min_file_size)),1)])):d("",!0),e.moviepilot_transfer?(o(),c(Ge,{key:2,size:"x-small",color:"primary",variant:"tonal"},{default:s(()=>He[123]||(He[123]=[r(" MP整理 ")])),_:1})):d("",!0)])])]),_:2},1024)]),_:2},1024),l<Tl.configs.length-1?(o(),c(pl,{key:0,class:"my-0"})):d("",!0)],64))),128))]),_:1})):(o(),c(We,{key:1,type:"info",density:"compact",variant:"tonal",class:"ma-3"},{default:s(()=>He[124]||(He[124]=[i("div",{class:"d-flex align-center"},[i("span",null,'暂无分享配置，请点击"添加分享"按钮添加')],-1)])),_:1}))]),_:1})]),_:1})]),_:1}),t(pl),t(ua,{class:"px-3 py-1"},{default:s(()=>[t(ra,{color:"grey",variant:"text",onClick:Fl,size:"small"},{default:s(()=>He[125]||(He[125]=[r("取消")])),_:1}),t(na),t(ra,{color:"primary",variant:"text",onClick:Wl,loading:al.value,disabled:!El.value,size:"small"},{default:s(()=>He[126]||(He[126]=[r(" 开始同步 ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(fa,{modelValue:$l.show,"onUpdate:modelValue":He[21]||(He[21]=e=>$l.show=e),"max-width":"700",scrollable:""},{default:s(()=>[t(Sl,null,{default:s(()=>[t(Ne,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:s(()=>[t(De,{icon:"mdi-share-variant",class:"mr-2",color:"primary",size:"small"}),i("span",null,n($l.editingIndex>=0?"编辑分享配置":"添加分享配置"),1),t(na),t(ra,{icon:"mdi-close",variant:"text",size:"small",onClick:jl})]),_:1}),t(Ml,{class:"px-3 py-3"},{default:s(()=>[$l.error?(o(),c(We,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal",closable:""},{default:s(()=>[r(n($l.error),1)]),_:1})):d("",!0),t(ca,{class:"mb-2"},{default:s(()=>[t(oa,{cols:"12"},{default:s(()=>[t(ga,{modelValue:$l.shareLink,"onUpdate:modelValue":He[10]||(He[10]=e=>$l.shareLink=e),label:"分享链接",hint:"115网盘分享链接","persistent-hint":"",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-link"},null,8,["modelValue"])]),_:1})]),_:1}),t(ca,{class:"mb-2"},{default:s(()=>[t(oa,{cols:"12",md:"6"},{default:s(()=>[t(ga,{modelValue:$l.shareCode,"onUpdate:modelValue":He[11]||(He[11]=e=>$l.shareCode=e),label:"分享码",hint:"分享码，和分享链接选填一项","persistent-hint":"",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-key"},null,8,["modelValue"])]),_:1}),t(oa,{cols:"12",md:"6"},{default:s(()=>[t(ga,{modelValue:$l.shareReceive,"onUpdate:modelValue":He[12]||(He[12]=e=>$l.shareReceive=e),label:"分享密码",hint:"分享密码，和分享链接选填一项","persistent-hint":"",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-lock",type:"password"},null,8,["modelValue"])]),_:1})]),_:1}),t(ca,{class:"mb-2"},{default:s(()=>[t(oa,{cols:"12",md:"6"},{default:s(()=>[t(ga,{modelValue:$l.sharePath,"onUpdate:modelValue":He[13]||(He[13]=e=>$l.sharePath=e),label:"分享路径",hint:"分享内容列表中的相对路径，默认为根目录 /","persistent-hint":"",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-folder-network"},null,8,["modelValue"])]),_:1}),t(oa,{cols:"12",md:"6"},{default:s(()=>[t(ga,{modelValue:$l.localPath,"onUpdate:modelValue":He[14]||(He[14]=e=>$l.localPath=e),label:"本地路径",hint:"本地生成STRM文件的路径","persistent-hint":"",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-folder","append-icon":"mdi-folder-search","onClick:append":He[15]||(He[15]=e=>{return l="local",Rl.show=!0,Rl.isLocal="local"===l,Rl.loading=!1,Rl.error=null,Rl.items=[],Rl.currentPath=Rl.isLocal&&$l.localPath||"/",Rl.callback=e=>{Rl.isLocal&&($l.localPath=e)},void Ol();var l})},null,8,["modelValue"])]),_:1})]),_:1}),t(ca,{class:"mb-2"},{default:s(()=>[t(oa,{cols:"12",md:"6"},{default:s(()=>[t(ga,{modelValue:$l.minFileSizeFormatted,"onUpdate:modelValue":He[16]||(He[16]=e=>$l.minFileSizeFormatted=e),label:"分享生成最小文件大小",hint:"小于此值不生成STRM(K,M,G)","persistent-hint":"",variant:"outlined",density:"compact",placeholder:"例如: 100M",clearable:"","prepend-inner-icon":"mdi-file-document"},null,8,["modelValue"])]),_:1})]),_:1}),t(pl,{class:"my-3"}),t(ca,{class:"mb-2"},{default:s(()=>[t(oa,{cols:"12"},{default:s(()=>[t(_a,{modelValue:$l.moviepilotTransfer,"onUpdate:modelValue":He[17]||(He[17]=e=>$l.moviepilotTransfer=e),label:"STRM 交由 MoviePilot 整理",color:"primary",density:"compact","hide-details":""},{label:s(()=>[i("div",Ce,[t(De,{icon:"mdi-transfer",size:"small",class:"mr-2"}),He[127]||(He[127]=i("span",null,"STRM 交由 MoviePilot 整理",-1))])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(ya,null,{default:s(()=>[$l.moviepilotTransfer?d("",!0):(o(),u("div",ze,[t(ca,{class:"mb-2"},{default:s(()=>[t(oa,{cols:"12",md:"4",class:"d-flex align-center"},{default:s(()=>[t(_a,{modelValue:$l.autoDownloadMediainfo,"onUpdate:modelValue":He[18]||(He[18]=e=>$l.autoDownloadMediainfo=e),color:"primary",density:"compact","hide-details":"",class:"flex-grow-1"},{label:s(()=>[i("div",Pe,[t(De,{icon:"mdi-download",size:"small",class:"mr-2"}),He[128]||(He[128]=i("span",null,"自动下载网盘元数据",-1))])]),_:1},8,["modelValue"])]),_:1}),t(oa,{cols:"12",md:"4",class:"d-flex align-center"},{default:s(()=>[t(_a,{modelValue:$l.mediaServerRefresh,"onUpdate:modelValue":He[19]||(He[19]=e=>$l.mediaServerRefresh=e),color:"primary",density:"compact","hide-details":"",class:"flex-grow-1"},{label:s(()=>[i("div",Ve,[t(De,{icon:"mdi-refresh",size:"small",class:"mr-2"}),He[129]||(He[129]=i("span",null,"刷新媒体服务器",-1))])]),_:1},8,["modelValue"])]),_:1}),t(oa,{cols:"12",md:"4",class:"d-flex align-center"},{default:s(()=>[t(_a,{modelValue:$l.scrapeMetadata,"onUpdate:modelValue":He[20]||(He[20]=e=>$l.scrapeMetadata=e),color:"primary",density:"compact","hide-details":"",class:"flex-grow-1"},{label:s(()=>[i("div",Me,[t(De,{icon:"mdi-file-search",size:"small",class:"mr-2"}),He[130]||(He[130]=i("span",null,"是否刮削元数据",-1))])]),_:1},8,["modelValue"])]),_:1})]),_:1})]))]),_:1}),t(We,{type:"info",variant:"tonal",density:"compact",class:"mt-3"},{default:s(()=>He[131]||(He[131]=[i("div",{class:"text-caption"},[i("div",{class:"mb-1"},[i("strong",null,"提示：")]),i("ul",{class:"ma-0 pl-4"},[i("li",null,"分享链接/分享码和分享密码只需要二选一配置即可"),i("li",null,"同时填写分享链接、分享码和分享密码时，优先读取分享链接"),i("li",null,"当 STRM交由MoviePilot整理 关闭时，才能配置自动下载网盘元数据、刷新媒体服务器和是否刮削元数据")])],-1)])),_:1})]),_:1}),t(pl),t(ua,{class:"px-3 py-1"},{default:s(()=>[t(ra,{color:"grey",variant:"text",onClick:jl,size:"small"},{default:s(()=>He[132]||(He[132]=[r("取消")])),_:1}),t(na),t(ra,{color:"primary",variant:"text",onClick:Al,disabled:!Il.value,size:"small"},{default:s(()=>He[133]||(He[133]=[r(" 保存 ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(fa,{modelValue:vl.show,"onUpdate:modelValue":He[32]||(He[32]=e=>vl.show=e),"max-width":"800",persistent:""},{default:s(()=>[t(Sl,null,{default:s(()=>[t(Ne,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:s(()=>[t(De,{icon:"mdi-cloud-download-outline",class:"mr-2",color:"primary",size:"small"}),He[134]||(He[134]=i("span",null,"115离线下载",-1)),t(na),t(ra,{icon:"mdi-close",variant:"text",size:"small",onClick:Kl})]),_:1}),t(Ml,{class:"pa-0"},{default:s(()=>[t(va,{modelValue:vl.activeTab,"onUpdate:modelValue":He[22]||(He[22]=e=>vl.activeTab=e),"bg-color":"primary-gradient",grow:""},{default:s(()=>[t(ha,{value:"tasks"},{default:s(()=>He[135]||(He[135]=[r("任务列表")])),_:1}),t(ha,{value:"add"},{default:s(()=>He[136]||(He[136]=[r("添加任务")])),_:1})]),_:1},8,["modelValue"]),t(ka,{modelValue:vl.activeTab,"onUpdate:modelValue":He[31]||(He[31]=e=>vl.activeTab=e),touchless:""},{default:s(()=>[t(ba,{value:"tasks"},{default:s(()=>[i("div",{style:{"overflow-x":"auto"},onTouchstart:He[26]||(He[26]=_(()=>{},["stop"])),onTouchmove:He[27]||(He[27]=_(()=>{},["stop"])),onTouchend:He[28]||(He[28]=_(()=>{},["stop"]))},[vl.error?(o(),c(We,{key:0,type:"error",density:"compact",class:"ma-3",variant:"tonal"},{default:s(()=>[r(n(vl.error),1)]),_:1})):d("",!0),t(xa,{headers:vl.headers,items:vl.tasks,"items-length":vl.totalTasks,loading:vl.loading,"items-per-page":vl.itemsPerPage,"onUpdate:options":Gl,density:"compact",class:"ma-2","no-data-text":"没有离线下载任务","loading-text":"正在加载任务...","items-per-page-text":"每页条目数",style:{"min-width":"700px"},onTouchstart:He[23]||(He[23]=_(()=>{},["stop"])),onTouchmove:He[24]||(He[24]=_(()=>{},["stop"])),onTouchend:He[25]||(He[25]=_(()=>{},["stop"]))},{"item.progress":s(({item:e})=>[i("div",Se,[t(sa,{"model-value":e.percent,color:Ql(e.status),stream:0===e.status||3===e.status,striped:0===e.status||3===e.status,height:"8",rounded:"",class:"flex-grow-1 mr-3"},null,8,["model-value","color","stream","striped"]),i("div",Te,n(e.percent)+"% ",1)])]),"item.status_text":s(({item:e})=>[t(Ge,{color:Ql(e.status),size:"x-small",variant:"tonal"},{default:s(()=>[r(n(e.status_text),1)]),_:2},1032,["color"])]),_:1},8,["headers","items","items-length","loading","items-per-page"])],32)]),_:1}),t(ba,{value:"add"},{default:s(()=>[i("div",$e,[vl.addError?(o(),c(We,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal"},{default:s(()=>[r(n(vl.addError),1)]),_:1})):d("",!0),t(pa,{modelValue:vl.links,"onUpdate:modelValue":He[29]||(He[29]=e=>vl.links=e),label:"下载链接",hint:"每行一个链接，支持 http(s)/ftp/magnet/ed2k","persistent-hint":"",variant:"outlined",rows:"5",clearable:""},null,8,["modelValue"]),t(ga,{modelValue:vl.destPath,"onUpdate:modelValue":He[30]||(He[30]=e=>vl.destPath=e),label:"网盘保存路径 (可选)",hint:"可选，默认为网盘待整理目录","persistent-hint":"",variant:"outlined",density:"compact",class:"mt-3","append-inner-icon":"mdi-folder-network-outline","onClick:appendInner":Zl,clearable:""},null,8,["modelValue"]),i("div",Ue,[t(ra,{color:"primary",onClick:Jl,loading:vl.adding,disabled:!vl.links||vl.adding,"prepend-icon":"mdi-plus"},{default:s(()=>He[137]||(He[137]=[r(" 添加任务 ")])),_:1},8,["loading","disabled"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(fa,{modelValue:Rl.show,"onUpdate:modelValue":He[34]||(He[34]=e=>Rl.show=e),"max-width":"800"},{default:s(()=>[t(Sl,null,{default:s(()=>[t(Ne,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:s(()=>[t(De,{icon:Rl.isLocal?"mdi-folder-search":"mdi-folder-network",class:"mr-2",color:"primary"},null,8,["icon"]),i("span",null,n(Rl.isLocal?"选择本地目录":"选择网盘目录"),1)]),_:1}),t(Ml,{class:"px-3 py-2"},{default:s(()=>[Rl.loading?(o(),u("div",Ee,[t(wa,{indeterminate:"",color:"primary"})])):(o(),u("div",Ie,[t(ga,{modelValue:Rl.currentPath,"onUpdate:modelValue":He[33]||(He[33]=e=>Rl.currentPath=e),label:"当前路径",variant:"outlined",density:"compact",class:"mb-2",onKeyup:y(Ol,["enter"])},null,8,["modelValue"]),t(Cl,{class:"border rounded","max-height":"300px","overflow-y":"auto"},{default:s(()=>["/"!==Rl.currentPath&&"C:\\"!==Rl.currentPath&&"C:/"!==Rl.currentPath?(o(),c(Ze,{key:0,onClick:Hl,class:"py-0",style:{"min-height":"auto"}},{prepend:s(()=>[t(De,{icon:"mdi-arrow-up",size:"small",class:"mr-2",color:"grey"})]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>He[138]||(He[138]=[r("上级目录")])),_:1}),t(ia,null,{default:s(()=>He[139]||(He[139]=[r("..")])),_:1})]),_:1})):d("",!0),(o(!0),u(p,null,m(Rl.items,(e,l)=>(o(),c(Ze,{key:l,onClick:l=>(e=>{e&&e.is_dir&&e.path&&(Rl.currentPath=e.path,Ol())})(e),disabled:!e.is_dir,class:"py-0",style:{"min-height":"auto"}},{prepend:s(()=>[t(De,{icon:e.is_dir?"mdi-folder":"mdi-file",size:"small",class:"mr-2",color:e.is_dir?"success":"blue"},null,8,["icon","color"])]),default:s(()=>[t(Ke,{class:"text-body-2"},{default:s(()=>[r(n(e.name),1)]),_:2},1024)]),_:2},1032,["onClick","disabled"]))),128)),Rl.items.length?d("",!0):(o(),c(Ze,{key:1,class:"py-2 text-center"},{default:s(()=>[t(Ke,{class:"text-body-2 text-grey"},{default:s(()=>He[140]||(He[140]=[r("该目录为空或访问受限")])),_:1})]),_:1}))]),_:1})])),"/"!==Rl.currentPath||Rl.isLocal?d("",!0):(o(),c(We,{key:2,type:"warning",density:"compact",class:"mt-2 text-caption",variant:"tonal",icon:"mdi-alert-circle-outline"},{default:s(()=>He[141]||(He[141]=[r(" 115离线下载不支持选择根目录，请选择或进入一个子目录。 ")])),_:1})),Rl.error?(o(),c(We,{key:3,type:"error",density:"compact",class:"mt-2 text-caption",variant:"tonal"},{default:s(()=>[r(n(Rl.error),1)]),_:1})):d("",!0)]),_:1}),t(ua,{class:"px-3 py-1"},{default:s(()=>[t(na),t(ra,{color:"primary",onClick:Dl,disabled:!Rl.currentPath||Rl.loading||"/"===Rl.currentPath&&!Rl.isLocal,variant:"text",size:"small"},{default:s(()=>He[142]||(He[142]=[r(" 选择当前目录 ")])),_:1},8,["disabled"]),t(ra,{color:"grey",onClick:Nl,variant:"text",size:"small"},{default:s(()=>He[143]||(He[143]=[r(" 取消 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(fa,{modelValue:ol.value,"onUpdate:modelValue":He[36]||(He[36]=e=>ol.value=e),"max-width":"500",persistent:""},{default:s(()=>[t(Sl,null,{default:s(()=>[t(Ne,{class:"text-h6 d-flex align-center"},{default:s(()=>[t(De,{icon:"mdi-alert-circle-outline",color:"warning",class:"mr-2"}),He[144]||(He[144]=r(" 确认操作 "))]),_:1}),t(Ml,null,{default:s(()=>[He[146]||(He[146]=i("div",{class:"mb-2"},"您确定要立即执行全量同步吗？",-1)),e.initialConfig?.full_sync_media_server_refresh_enabled?(o(),c(We,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2",icon:"mdi-alert"},{default:s(()=>He[145]||(He[145]=[i("div",{class:"text-body-2 mb-1"},[i("strong",null,"重要警告")],-1),i("div",{class:"text-caption"}," 全量同步完成后将自动刷新整个媒体库，此操作会扫描所有媒体文件，可能导致媒体服务器负载增加。请确保您已了解此风险并自行承担相应责任。 ",-1)])),_:1})):d("",!0)]),_:1}),t(ua,null,{default:s(()=>[t(na),t(ra,{color:"grey",variant:"text",onClick:He[35]||(He[35]=e=>ol.value=!1),disabled:el.value},{default:s(()=>He[147]||(He[147]=[r(" 取消 ")])),_:1},8,["disabled"]),t(ra,{color:"warning",variant:"text",onClick:Pl,loading:el.value},{default:s(()=>He[148]||(He[148]=[r(" 确认执行 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(fa,{modelValue:cl.value,"onUpdate:modelValue":He[38]||(He[38]=e=>cl.value=e),"max-width":"450",persistent:""},{default:s(()=>[t(Sl,null,{default:s(()=>[t(Ne,{class:"text-h6 d-flex align-center"},{default:s(()=>[t(De,{icon:"mdi-alert-circle-outline",color:"warning",class:"mr-2"}),He[149]||(He[149]=r(" 确认操作 "))]),_:1}),t(Ml,null,{default:s(()=>He[150]||(He[150]=[r(" 您确定要立即执行全量同步数据库吗？该操作会覆盖原有数据库数据 ")])),_:1}),t(ua,null,{default:s(()=>[t(na),t(ra,{color:"grey",variant:"text",onClick:He[37]||(He[37]=e=>cl.value=!1),disabled:ll.value},{default:s(()=>He[151]||(He[151]=[r(" 取消 ")])),_:1},8,["disabled"]),t(ra,{color:"warning",variant:"text",onClick:Vl,loading:ll.value},{default:s(()=>He[152]||(He[152]=[r(" 确认执行 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(fa,{modelValue:gl.show,"onUpdate:modelValue":He[40]||(He[40]=e=>gl.show=e),"max-width":"900",scrollable:""},{default:s(()=>[t(Sl,null,{default:s(()=>[t(Ne,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-gradient"},{default:s(()=>[t(De,{icon:"mdi-history",class:"mr-2",color:"primary",size:"small"}),i("span",null,"同步删除历史记录 (共 "+n(dl.value.length)+" 条)",1),t(na),t(ra,{icon:"",size:"x-small",variant:"text",onClick:ea,loading:ul.value},{default:s(()=>[t(De,null,{default:s(()=>He[153]||(He[153]=[r("mdi-refresh")])),_:1})]),_:1},8,["loading"]),t(ra,{icon:"",size:"small",variant:"text",onClick:He[39]||(He[39]=e=>gl.show=!1)},{default:s(()=>[t(De,null,{default:s(()=>He[154]||(He[154]=[r("mdi-close")])),_:1})]),_:1})]),_:1}),t(Ml,{class:"pa-0"},{default:s(()=>[ul.value?(o(),c(qe,{key:0,type:"list-item-avatar-three-line@5"})):0===dl.value.length?(o(),u("div",Re,[t(De,{icon:"mdi-information-outline",size:"large",color:"grey",class:"mb-2"}),He[155]||(He[155]=i("div",{class:"text-caption text-grey"},"暂无删除历史",-1))])):(o(),c(Cl,{key:2,class:"bg-transparent pa-0",style:{"max-height":"70vh","overflow-y":"auto"}},{default:s(()=>[(o(!0),u(p,null,m(dl.value,(e,l)=>(o(),u(p,{key:e.unique||l},[t(Ze,{class:"px-3 py-2"},{prepend:s(()=>[t(ta,{size:"56",rounded:"",class:"mr-3"},{default:s(()=>[e.image?(o(),c(aa,{key:0,src:e.image,alt:e.title,cover:""},null,8,["src","alt"])):(o(),c(De,{key:1,icon:"mdi-movie"}))]),_:2},1024)]),append:s(()=>[t(ra,{icon:"",size:"small",variant:"text",color:"error",onClick:l=>la(e.unique),loading:ml.value===e.unique},{default:s(()=>[t(De,null,{default:s(()=>He[156]||(He[156]=[r("mdi-delete")])),_:1})]),_:2},1032,["onClick","loading"])]),default:s(()=>[t(Ke,{class:"text-body-1 font-weight-medium"},{default:s(()=>[r(n(e.title),1)]),_:2},1024),t(ia,{class:"text-caption"},{default:s(()=>[i("div",Le,[t(Ge,{size:"small",variant:"tonal",color:"primary"},{default:s(()=>[r(n(e.type),1)]),_:2},1024),e.year?(o(),u("span",Fe,"· "+n(e.year),1)):d("",!0),e.season?(o(),u("span",Be,"· S"+n(String(e.season).padStart(2,"0")),1)):d("",!0),e.episode?(o(),u("span",je,"· E"+n(String(e.episode).padStart(2,"0")),1)):d("",!0)]),e.path?(o(),u("div",Ae,n(e.path),1)):d("",!0),i("div",Oe,n(e.del_time),1)]),_:2},1024)]),_:2},1024),l<dl.value.length-1?(o(),c(pl,{key:0,class:"my-0"})):d("",!0)],64))),128))]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-f394c4b2"]]);export{Ge as default};
